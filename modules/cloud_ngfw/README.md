# Palo Alto Networks Cloud NGFW Module

A terraform module for deploying a fully managed Cloud NGFW in Google Cloud Platform along with associated policy and rules to handle traffic via firewall endpoints.

## Usage

For usage please refer to any reference architecture example.

## Reference
<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
### Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3, < 2.0 |
| <a name="requirement_google"></a> [google](#requirement\_google) | >= 4.54 |

### Providers

| Name | Version |
|------|---------|
| <a name="provider_google"></a> [google](#provider\_google) | >= 4.54 |

### Modules

No modules.

### Resources

| Name | Type |
|------|------|
| [google_compute_network_firewall_policy.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_network_firewall_policy) | resource |
| [google_compute_network_firewall_policy_association.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_network_firewall_policy_association) | resource |
| [google_compute_network_firewall_policy_rule.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_network_firewall_policy_rule) | resource |
| [google_network_security_firewall_endpoint.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/network_security_firewall_endpoint) | resource |
| [google_network_security_firewall_endpoint_association.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/network_security_firewall_endpoint_association) | resource |
| [google_network_security_security_profile.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/network_security_security_profile) | resource |
| [google_network_security_security_profile_group.this](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/network_security_security_profile_group) | resource |

### Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_firewall_endpoints"></a> [firewall\_endpoints](#input\_firewall\_endpoints) | A map containing each firewall endpoint and association to create.<br><br>Following properties are available:<br><br>- `firewall_endpoint_name`             - (`string`, required) The name of the firewall endpoint.<br>- `org_id`                             - (`string`, required) The Google Cloud organization ID.<br>- `zone`                               - (`string`, required) The zone where the firewall endpoint will be deploye<br>- `billing_project_id`                 - (`string`, required) The billing project ID for the Google Cloud organization.<br>- `firewall_endpoint_association_name` - (`string`, required) The name of the firewall endpoint association.<br>- `project_id`                         - (`string`, required) The project ID where network to be associated with the firewall endpoint resides.<br>- `tls_inspection_policy`              - (`string`, optional) The name of the TLS inspection policy to be applied to the firewall endpoint.<br>- `labels`                             - (`map(string)`, optional) A map of labels to apply to the firewall endpoint and association.<br>- `disabled`                           - (`bool`, optional, default: `false`) Whether the firewall endpoint should be disabled. `NOTE`: This value MUST be `false` at creation time.<br><br>**Important!** \<br>`disabled` property MUST be `false` at resource creation time. This can be set to `true` later to disable the firewall endpoint. | <pre>map(object({<br>    firewall_endpoint_name             = string<br>    org_id                             = string<br>    zone                               = string<br>    billing_project_id                 = string<br>    firewall_endpoint_association_name = string<br>    project_id                         = string<br>    network_id                         = string<br>    tls_inspection_policy              = optional(string)<br>    labels                             = optional(map(string), null)<br>    disabled                           = optional(bool, false)<br>  }))</pre> | n/a | yes |
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | A name prefix that will prepend all resources created. | `string` | n/a | yes |
| <a name="input_network_policies"></a> [network\_policies](#input\_network\_policies) | A map containing the creation of a single network policies and it's associated rules.<br><br>Following properties are available:<br><br>- `policy_name`              - (`string`, required) The name of the network policy.<br>- `description`              - (`string`, optional) The description of the network policy.<br>- `project_id`               - (`string`, required) The project ID where the network policy will be created.<br>- `network_associations`     - (`map(object)`, required) A map of network associations for the network policy. Each object has the following properties:<br>  - `policy_association_name` - (`string`, required) The name of the policy association.<br>  - `network_id`              - (`string`, required) The network ID to associate with the policy.<br>- `rules`                - (`map(object)`, required) A map of network policy rules for the policy association. Each object has the following properties:<br>  - `rule_name`               - (`string`, required) The name of the network policy rule.<br>  - `description`             - (`string`, optional) The description of the network policy rule.<br>  - `direction`               - (`string`, required) The direction of the network policy rule, either "INGRESS" or "EGRESS".<br>  - `enable_logging`          - (`bool`, optional, default: `false`) Whether to enable logging for the network policy rule.<br>  - `tls_inspect`             - (`bool`, optional, default: `false`) Whether to enable TLS inspection for the network policy rule.<br>  - `priority`                - (`number`, optional, default: `100`) The priority of the network policy rule.<br>  - `action`                  - (`string`, required) The action to take for the network policy rule, either "ALLOW" or "DENY".<br>  - `security_group_key`      - (`string`, optional) The key of the security group to apply the network policy rule to.<br>  - `target_service_accounts` - (`list(string)`, optional) The list of service account emails to apply the network policy rule to.<br>  - `disabled`                - (`bool`, optional, defaults to `false`) Whether to disable the network policy rule.<br>  - `target_secure_tags`      - (`map(object)`, optional) A map of secure tags to apply to the network policy rule. Each object has the following properties:<br>    - `name`                  - (`string`, required) The name of the secure tag.<br>  - `src_secure_tags`         - (`map(object)`, optional) A map of source secure tags to apply to the network policy rule. Each object has the following properties:<br>    - `name`                  - (`string`, required) The name of the source secure tag.<br>  - `src_ip_ranges`           - (`list(string)`, optional) A list of source IP ranges to apply to the network policy rule.<br>  - `dest_ip_ranges`          - (`list(string)`, optional) A list of destination IP ranges to apply to the network policy rule.<br>  - `src_address_groups`      - (`list(string)`, optional) A list of source address groups to apply to the network policy rule.<br>  - `dest_address_groups`     - (`list(string)`, optional) A list of destination address groups to apply to the network policy rule.<br>  - `src_fqdns`               - (`list(string)`, optional) A list of source fully qualified domain names to apply to the network policy rule.<br>  - `dest_fqdns`              - (`list(string)`, optional) A list of destination fully qualified domain names to apply to the network policy rule.<br>  - `src_region_codes`        - (`list(string)`, optional) A list of source region codes to apply to the network policy rule.<br>  - `dest_region_codes`       - (`list(string)`, optional) A list of destination region codes to apply to the network policy rule.<br>  - `src_threat_intelligences`  - (`list(string)`, optional) A list of source threat intelligences to apply to the network policy rule.<br>  - `dest_threat_intelligences` - (`list(string)`, optional) A list of destination threat intelligences to apply to the network policy rule.<br>  - `ip_protocol`             - (`string`, required) The IP protocol to apply to the network policy rule, either tcp, udp, icmp, esp, ah, ipip, sctp or ip protocol number<br>  - `ports`                   - (`list(string)`, optional) A list of ports to apply to the network policy rule. Ranges can also be used - like `123-567` | <pre>object({<br>    policy_name = string<br>    description = optional(string, null)<br>    project_id  = string<br>    network_associations = map(object({<br>      policy_association_name = string<br>      network_id              = string<br>    }))<br>    rules = map(object({<br>      rule_name               = string<br>      description             = optional(string, null)<br>      direction               = string<br>      enable_logging          = optional(bool, false)<br>      tls_inspect             = optional(bool, false)<br>      priority                = optional(number, 100)<br>      action                  = string<br>      security_group_key      = optional(string)<br>      target_service_accounts = optional(list(string))<br>      disabled                = optional(bool, false)<br>      target_secure_tags = optional(map(object({<br>        name = string<br>      })), {})<br>      src_secure_tags = optional(map(object({<br>        name = string<br>      })), {})<br>      src_ip_ranges             = optional(list(string))<br>      dest_ip_ranges            = optional(list(string))<br>      src_address_groups        = optional(list(string))<br>      dest_address_groups       = optional(list(string))<br>      src_fqdns                 = optional(list(string))<br>      dest_fqdns                = optional(list(string))<br>      src_region_codes          = optional(list(string))<br>      dest_region_codes         = optional(list(string))<br>      src_threat_intelligences  = optional(list(string))<br>      dest_threat_intelligences = optional(list(string))<br>      ip_protocol               = string<br>      ports                     = optional(list(string))<br>    }))<br>  })</pre> | n/a | yes |
| <a name="input_network_security_profiles"></a> [network\_security\_profiles](#input\_network\_security\_profiles) | A map each network security profile and group to create.<br><br>Following properties are available:<br><br>- `profile_name`              - (`string`, required) The name of the network security profile.<br>- `profile_group_name`        - (`string`, required) The name of the network security profile group.<br>- `org_id`                    - (`string`, required) The Google Cloud organization ID.<br>- `profile_description`       - (`string`, optional) The description of the network security profile.<br>- `profile_group_description` - (`string`, optional) The description of the network security profile group.<br>- `labels`                    - (`map(string)`, optional) A map of labels to apply to the network security profile and group.<br>- `location`                  - (`string`, optional, defaults to`"global"`) The location where the network security profile and group will be created.<br>- `severity_overrides`        - (`map(string)`, optional, defaults to empty map) A map of severity overrides for the network security profile.<br>- `threat_overrides`          - (`map(string)`, optional, defaults to empty map) A map of threat overrides for the network security profile. | <pre>map(object({<br>    profile_name              = string<br>    profile_group_name        = string<br>    org_id                    = string<br>    profile_description       = optional(string, null)<br>    profile_group_description = optional(string, null)<br>    labels                    = optional(map(string), null)<br>    location                  = optional(string, "global")<br>    severity_overrides        = optional(map(string), {})<br>    threat_overrides          = optional(map(string), {})<br>  }))</pre> | n/a | yes |

### Outputs

No outputs.
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->